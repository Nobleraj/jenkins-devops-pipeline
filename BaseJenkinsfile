def userName = 'princenoble'
pipeline {
    agent any
    environment {
        DOCKER_IMAGE_NAME = "${userName}/baseimage-${imageTag}:${imageVersion}"
    }
    stages {
        stage('Build base image') {
            steps {
                script {
                    // Build the Docker image
                   sh 'docker buildx create --name mybuilder'
                   sh 'docker buildx use mybuilder'
                   docker.buildx(buildKit: true, tags: DOCKER_IMAGE_NAME, extraArgs: '--platform linux/amd64,linux/arm64 -f BaseDockerfile .')
                }
            }
        }
    }
    
}
